/* Font imports */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap');

/* Imports */
@import 'tailwindcss';
@import '@kokimoki/shared/styles.css';

@plugin '@tailwindcss/typography';

@theme {
	/* Add theme styling here */
	--km-font-sans:
		'Noto Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
		'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
	--font-serif: ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif;
	--font-mono:
		ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono',
		'Courier New', monospace;
}

/* Theme CSS variables with defaults */
:root {
	/* Default theme values (light mode) */
	--theme-primary: #22c55e;
	--theme-secondary: #16a34a;
	--theme-accent: #86efac;
	--theme-background: #f0fdf4;
	--theme-gradient: #dcfce7;
	--theme-text: #0f172a;

	/* Derived theme colors - computed surfaces */
	--theme-surface: #ffffff;
	--theme-surface-hover: #f8fafc;
	--theme-surface-secondary: #f1f5f9;
	--theme-surface-tertiary: #e2e8f0;
	--theme-border: #cbd5e1;
	--theme-border-light: #e2e8f0;
	--theme-text-muted: #64748b;
	--theme-text-secondary: #475569;
}

/* Dark mode detection - when background is dark, adjust surfaces */
html.dark-theme {
	--theme-surface: #1e293b;
	--theme-surface-hover: #334155;
	--theme-surface-secondary: #334155;
	--theme-surface-tertiary: #475569;
	--theme-border: #475569;
	--theme-border-light: #334155;
	--theme-text-muted: #94a3b8;
	--theme-text-secondary: #cbd5e1;
}

/* Markdown styling with Tailwind Typography (prose) */
.prose {
	--tw-prose-headings: var(--theme-text);
	--tw-prose-body: var(--theme-text);
	--tw-prose-bold: var(--theme-text);
	--tw-prose-links: var(--theme-primary);
	--tw-prose-bullets: var(--theme-text-muted);
	--tw-prose-counters: var(--theme-text-muted);
	--tw-prose-quotes: var(--theme-text);
	--tw-prose-pre-bg: var(--theme-surface-secondary);
	--tw-prose-pre-code: var(--theme-text);
	--tw-prose-hr: var(--theme-border);
}

html,
body {
	@apply overscroll-none;
	color: var(--theme-text);
	background-color: var(--theme-background);
}

.km-input {
	@apply w-full max-w-96 rounded-xl border border-slate-300 bg-slate-50 px-5 py-3 transition-colors focus:ring-2 focus:ring-green-500 focus:outline-none disabled:opacity-50;
}

.km-btn-primary,
.km-btn-secondary,
.km-btn-error,
.km-btn-neutral {
	@apply inline-flex items-center justify-center gap-3 rounded-xl px-5 py-3 font-medium transition-colors not-disabled:cursor-pointer disabled:cursor-not-allowed disabled:bg-slate-200 disabled:text-slate-500 disabled:opacity-50;
}

.km-btn-primary {
	@apply not-disabled:bg-slate-700 not-disabled:text-white not-disabled:hover:bg-slate-800;
}

.km-btn-secondary {
	@apply not-disabled:bg-slate-200 not-disabled:text-slate-900 not-disabled:hover:bg-slate-300;
}

.km-btn-error {
	@apply not-disabled:bg-red-500 not-disabled:text-white not-disabled:hover:bg-red-600;
}

.km-btn-neutral {
	@apply not-disabled:bg-slate-600 not-disabled:text-white not-disabled:hover:bg-slate-700;
}

/* Theme-aware utility classes */
.theme-text {
	color: var(--theme-text);
}

.theme-text-muted {
	color: var(--theme-text-muted);
}

.theme-text-secondary {
	color: var(--theme-text-secondary);
}

.theme-bg {
	background-color: var(--theme-background);
}

.theme-bg-surface {
	background-color: var(--theme-surface);
}

.theme-bg-surface-hover:hover {
	background-color: var(--theme-surface-hover);
}

.theme-bg-surface-secondary {
	background-color: var(--theme-surface-secondary);
}

.theme-bg-surface-tertiary {
	background-color: var(--theme-surface-tertiary);
}

.theme-border {
	border-color: var(--theme-border);
}

.theme-border-light {
	border-color: var(--theme-border-light);
}

/* Theme-aware input styling */
.km-input-themed {
	@apply w-full max-w-96 rounded-xl border px-5 py-3 transition-colors focus:ring-2 focus:ring-green-500 focus:outline-none disabled:opacity-50;
	background-color: var(--theme-surface);
	border-color: var(--theme-border);
	color: var(--theme-text);
}

.km-input-themed::placeholder {
	color: var(--theme-text-muted);
}

/* Theme-aware card/panel styling */
.theme-card {
	background-color: var(--theme-surface);
	border-color: var(--theme-border-light);
}

.theme-card-interactive {
	background-color: var(--theme-surface);
	border-color: var(--theme-border-light);
	transition: background-color 0.15s ease, border-color 0.15s ease;
}

.theme-card-interactive:hover {
	background-color: var(--theme-surface-hover);
}
